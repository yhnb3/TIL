# 자바스크립트의 객체 지향 기법

자바스크립트 클래스 프로그래밍에 대한 실용적 기법들을 다룰 것이다. 

눈여겨볼 만한 예제 클래스 두 개의 클래스는 그 자체로도 흥미로울 뿐만 아니라 다음 논의에 대한 시작점을 제공한다.

## Set 클래스

> 집합 set는 종복되지 않은 값을 정렬되지 않은 형태로 저장하는 데이터 구조이다.

## 열거형

> 열거형은 나열될 수 있는 유한 개의 값 집합을 사용하여 정의하는 자료형이다.

## 표준 변환 메서드

작성한 모든 클래스에 변환 메서드를 구현할 필요는 없지만, 변환 메서드가 아주 중요하다는 사실을 알고는 있어야 한다.

만약 작성한 클래스에 변환 메서드를 구현하지 않았다면, 이는 단순히 실수로 구현하지 않은 것이 아니라 의도적인 것이어야 한다.

1. 가장 중요한 메서드는 `toString()`이다.

   이 메서드의 목적은 객체의 문자열 표현을 반환하는 것이다. object.prototype 기본 구현을 상속할 것이다. 그 기본 구현 메서드는 별 쓸모 없는 문자열 "[objectObject]"을 반환 할 것이다.

   꼭 정의할 필요가 없다고 해도 toString()을 정의 하면 디버깅을 수월하게 할 수 있다.

2. `toLocaleString()`

   toLocaleString() 메서드는 객체를 로케일에 맞는 문자열로 변환한다. 기본적으로 객체는 toString() 메서드를 호출하는 기본 toLocaleString() 메서드를 상속한다.

3. `valueOf()` 

   이 메서드는 객체를 원시값으로 변환한다. 

   예를들어 valueOf() 메서드는 객체가 숫자 컨텍스트에서 산술 연산자나 비교 연산자와 함게 사용될 때 자동으로 호출된다.

4. `toJson()`

   Json 형식은 데이터 구조를 직력화 하는데 사용되고 자바스크립트 원시 값, 배열, 일반 객체를 처리할 수 있다. JSON은 클래스의 자세한 구조를 포함하지 못하기 때문에 객체를 직렬화 할 때 프로토타입과 생성자는 무시된다.

## 비교 메서드

자바스크립의 동치 연산자들은 객체를 비교할 때 값이 아니라 참조를 사용한다. 

즉, 주어진 두 참조가 같은 객체를 가리키고 있는지를 살펴본다. 이런 연산자들은 두 객체에, 이름이 같고 값도 같은 프로퍼티가 존재하는지를 검사하지 않는다.

두 객체가 동등한지 또는 어느 한쪽이 더 크거나 작은지를 비교활 수 있게 만드는것도 유용하다. 

만약 여러분들이 클래스를 만들고 그 클래스의 인스턴스를 서로 비교하려면 비교하는데 사용할 메서드를 정의 해야한다.

## 메서드 빌려오기

단순히 객체의 프로퍼티로 할당 된 함수일 뿐이며, 객체를 '통해' 또는 객체를 '대상으로' 호출될 따름이다. 하나의 함수는 두 프로퍼티에 할당될 수 있고, 그런 다음에는 두 개의 메서드로 작동한다.

## private 상태

전통적 객체 지향 프로그래밍에서는 종종 중욯나 상태 변수를 직접 읽거나 쓰는 것을 금지하고, 오직 객체의 메서드만을 통해 객체 상태에 접근하도록 허용함으로써 객체의 상태를 캡슐화하거나 숨기는 것을 목표로 삼는다.

인스턴스를 생성할 때, 생성자 호출의 클로저에 포착된 션수를 사용하면 private 인스턴스를 흉내 낼수있다.

이러한 캡슐화 기법에는 오버헤드가 있다는 것을 염두에 두자. 상태를 캡슐화하도록 클로저를 사용하는 클래스는 그렇지 않은 클래스보다 확실히 느리고 크다.

## 생성자 오버로딩과 팩토리 메서드

때로는 객체를 한가지 이상의 방법으로 초기화 해야할 필요도 있다. 

Complex 객체를 실수와 허수 대신 반경과 각도로 초기화 해야한다거나

Set 멤버를 생성자의 인자 대신 배열 원소들로 초기화 해야한다거나 하는 경우이다.

이를 위한 방법은 생성사를 오버로드하고 전달인자에 따라 각기다른 초기화 작업이 수행되도록하는것이다.

하지만 극좌표로 초기화되는 복소수의 경우에는 생성자 오버로딩이 아예 불가능하다. 

대신 팩터리 메서드를 이용할 수 있다. 

> 팩터리 메서드는 해당 클래서의 인스턴스를 반환하는 클래스 메서드이다. 

팩터리 메서드의 매력은 메서드 이름을 원하는 대로 지을 수 있다는 점이고, 이름이 다르 ㄴ메서드는 다른 방식의 초기화를 할 수 있도록 한다는 점이다.