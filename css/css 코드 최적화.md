## css 코드 최적화

light house에 css 관련 오류 및 최적화에 어긋나는 종류 제공

- 사용하지 않는 css 제거
- 렌더 차단 리소스 제거

### 사용하지 않는 css 제거

css는 페이지 렌더링을 차단하는 리소스 이며 사용하지 않는 css를 계산하는데에도 시간을 소모하게 된다.

#### coverage Tab

커버리지 탭을 통해 unused CSS확인 가능

### 렌더 블로킹 리소스 제거

이유?

브라우저가 외부 리소스를 다운로드하고 파싱하는 동안 페이지 콘텐츠를 파싱하거나 렌더링 하지 않기 때문에 페이지 표시 속도 저하의 원인.

unused CSS는 render blocking을 가중하는 요인이다.

렌더 블로킹 리소스 표시 조건

- defer, async 속성이 없는 `<head>`요소의 `<script`태그
- media 속성과 값이 없는 `<link rel='stylesheet'>`태그

#### Render blocking `<script>`

1. 필수 스크립트는 html에 `<script>`형식으로 작성
2. 기타 스크립트는 `<body/>` 종료 태그 직전에 선언
3. 마지막에 파싱해도 문제 없으면 defer 속성
4. 가능한 빠른 시점에 실행 필요하면 async 속성.

CSS 파일을 다운로드하고 해석하는 동안 FCP(처음 컨텐츠 페인팅)이 발생하지 않는다. 그래서 사용자들은 이 페이지가 느리다고 생각할 수 밖에 없다.

개선 방법

1. 반응형 웹인 경우 해상도 구간별로 css파일을 분리하고 media 속성으로 분기.
2. 필수 스타일 페이지 `<style>`형식으로 작성
3. 지연스타일은 `<link re='preload'>` 속성으로 병렬 로딩 후 지연 적용.

