### 중첩루프조인, 정렬병합조인, 해시조인의 차이

#### 중첩루프 조인

중첩 fot문과 같은 원리로 조건에 맞는 조인을 하는 방법입니다.

여기서 발전한 블록중첩루프조인이 있습니다.

#### 정렬 병합 조인

정렬하고 정렬이 끝난 후에 조인 작업을 수행하는 조인입니다.

#### 해시 조인

해시테이블을 기반으로 조인하는 방법입니다. 두 개의 테이블을 조인한다고 했을때 하나의 테이블이 메모리에 온전히 들어간다면 보통 중첩 루프 조인보다 효율적입니다.

#### 빌드 단계

빌드 단계는 입력 테이블 중 하나를 기반으로 메모리 내 해시 테이블을 빌드하는 단계입니다.

#### 프로브 단계

프로브 단계 동안 레코드 읽기를 시작하며 각 레코드에서 원하는 조건에 일치하는 레코드를 찾아서 결과값으로 반환 합니다.

### 데이터베이스의 교착상태

#### 데드락

데이터베이스에서 교착 상태는 둘 이상의 트랜잭션이 서로 잠금을 포기하기를 기다리는 상황입니다.

대규모 데이터 베이스에서는 일일히 데드락을 감지하는데 코스트가 너무 많이 드므로 교착상태를 방지하려고 노력합니다.

#### 교착상태 방지

1. 격리수준 변경

   완전히 제거할 순 없다.

2. 서비스의 로직을 교착되지 않게 수정

3. wait-die or wound wait 방법

   타임스탬프를 기반으로 트랜잭션을 대기, 선점, 종료하는 방식

   wait-die : 트랜잭션 방지를 위한 비선점기법 -> 늙은 것이 요구하면 대기하고, 젊은 것이 요구하면 젊은 것은 죽는것.

   wound wait: 선점 기법 -> 늙은 것이 요구하면 젊은 것은 강제로 일시정지 늙은이의 것. 젊은 것이 요구하면 대기

## 데이터 베이스 정규화

정규화 과정은 릴레이션 간의 함수종속 관계로 인해 데이터 베이스 이상 현상이 일어나는 것을 해결하는 과정이자 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정입니다.

정규화를 통해 테이블을 나누더라도 조인으로 손실없이 복원가능해야합니다. 이것을 **무손실분해**라고 합니다.

#### 이상현상

데이터베이스의 설계를 잘못 했을때 불필요한 데이터 중복이 발생하여 릴레이션에 대한 데이터의 삽입, 갱신, 삭제 연산을 수행할때 부작용이 발생하는 것을 말합니다.

### 함수적 종속성

어떤 린레이션을 구성하는 속성의 부분집합이 X, Y라고 할때 하나의 X의 대해 Y가 하나라면 Y를 함수적으로 결정한다 또는 Y가 X에 함수적으로 종속되어있다는 관계를 갖는 것을 말합니다.

#### 완전 함수 종속

Y가 X전체에 종속된 것을 말한다.

#### 부분 함수 종속

Y가 X의 일부에 종속된 것을 말한다.

### 제 1 정규형

릴레이션의 모든 도메인이 더 이상 분해할 수 없는 원자값으로 분리하는 것을 의미합니다.

### 제 2 정규형

릴레이션이 제1정규형이며 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속이 된 것을 말합니다.

### 제 3 정규형

기본키가 아닌 속성이 기본키에 이행적 함수종속을 만족하지 않는 상태를 말합니다. 즉 이행적 함수 종속인 속성들이 있다면 떼어내버리게 됩니다.

### 보이스 코드 정규형 (BCNF)

제 3정규형이고 모든 결정자가 후보키인 상태를 말합니다. 보통 하나의 릴레이션에서 여러개의 후보키가 존재할 수 잇는데 이 경우에 제 3 정규형보다 엄격한 기준으로 제약을 건 것이 바로 보이스 / 코드 정규형입니다.

### 정규화 과정이 꼭 필요할까?

테이블이 나눠지게 되면 성능이 좋아질 수도 나빠질 수도 있습니다.

잦은 JOIN에 따라 성능이 안 좋아 질 수가 있습니다.

그렇다면 어느 정도의 비정규화 과정도 필요합니다.

