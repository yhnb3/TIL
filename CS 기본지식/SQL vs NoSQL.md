# SQL vs NoSQL

## 스키마(Schema)

- 데이터 베이스의 구조과 제약조건에 관한 전반적인 명세를 기술한 것
  - 개체의 특징을 나타낸 속성(attribue)
  - 속성들의 집합으로 이루어진 개체(entity) 
  - 개체 간 존재하는 관계(relation ship)
  - 위 3개에 대한 정의와 유지해야할 제약 조건들을 기술한 것
- 사용자 관점에 따라 외부, 내부, 개념 스키마로 나뉜다.
  - 개념 스키마 : 데이터 베이스의 전체적인 논리적 구조
  - 내부 스키마 : 데이터 베이스의 물리적 저장구조
  - 외부 스키마 : 사용자에게 보여지는 스키마( 서브 스키마라고도 한다. )

## SQL(Structured Query Language)

> **관계형 데이터 관리 시스템 (RDBMS)를 관리하기 위한 설계된 특수 목적의 프로그래밍 언어**
>
> RDBMS => ex) My sql, Maria DB, oracle... 
>
> 그 자체가 DB라고 할 수 없다.

## NoSQL

> 비 관계형 DB
>
> RDBMS와는 다르게 Document로 저장한다.
>
> 어떤 형식으로 데이터를 저장할지 확신이 서지 않는 상황에서 NoSQL이 적당하다.

## Relation

- SQL에서는 Relation이 굉장히 중요하다. 
  - 각 table의 관계를 join을 통해서 파악할 수 있다.
  - 데이터를 중복없이 저장할 수 있고
  - 데이터 하나만 관리하면 되기 때문에 데이터의 정확성을 높힐 수 있다.
- NoSql은 비관계형이다. (non sql)
  - 하나의 document에 모든 데이터가 다 담겨있다.
  - 중복된 데이터를 삭제하거나 업데이트를 할때 반영 되지 않을 수 있어 유의해야함.

## Scalability

- 데이터의 확장은 수직적, 수평적으로 나눌 수 있다.
  - 수직적은 서버의 크기를 늘이는것
  - 수평적은 서버의 수를 늘이는것
- SQL은 수직적으로 확장한다.
  - cpu나 ram을 업그레이드를 하여 서버의 성능을 향상
- NoSQL은 수평적으로 확장
  - 더 많은 서버를 추가하여 서버를 전체적으로 분산 시킨다.
  - Shading
    - 같은 테이블 스키마를 가진 데이터를 다수의 DB에 분산하여 저장하는 방법
    - SQL을 수평적 확장의 목적으로 사용가능하지만 구현이 매우 어렵다.

## Property

- SQL은 `ACID` 특성을 따른다.
  - `ACID`란 DB의 `트랜잭션`이 안전하게 수행된다고 보장하기 위한 특징이다.
  - `트랜잭션`이란 DB의 삭제, 수정, 업데이트의 한 묶인 작업
  - 즉 `트랜잭션` 내 작업이 모두 실행되거나 , 모두 실행되지 않는다.
    - `트랜잭션`의 특징
      - 원자성 : 한 일련의 작업이 한몸이다.
      - 일관성 : 정의된 규칙에서만 수정 가능한 특징
      - 고립성 : 다른 `트랜잭션`이 끼어들지 못한다.
      - 영구성 : 성공적으로 수행된 트랜잭션은 영원히 반영된다.
- NoSQL은 `CAP`이론을 따른다.
  - 분산시스템에서 `CAP` 3가지 속성을 모두 만족하는 것은 불가능 하며
  - 오직 2가지만을 만족할 수 있다는 것
    - `CAP`
      - 일관성 : 모든 요청은 최신 데이터 또는 에러를 응답받는다.
        - DB가 분산 서버에 저장되어 있어도 모든 서버에 수정된 데이터를 응답해줘야 한다.
      - 가용성 : 모든 요청은 정상 응답을 받는다.
      - 분리 내구성 : DB간 통신이 실패해도 시스템은 정상 동작 한다.