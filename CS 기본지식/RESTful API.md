# RESTful API

## REST란?

>Representational State Transfer라는 용어의 약자이다.
>
>자원을 `URI`로 표시하고 해당 자원의 상태를 주고 받는 것을 의미한다.

REST의 구성요소

- 자원(Resource) : URI
- 행위(Verb) : HTTP METHOD
- 표현(Representations)

즉, REST는 `URI`를 통해 자원을 표시하고, `HTTP METHOD`를 이용하여 해당 자원의 `행위`를 정해주며 그결과를 받는 것을 말한다.

## REST의 특징

1. Uniform Interface(유니폼 인터페이스)

   `HTTP` 표준만 따른다면 어떤 언어 혹은 어떤 플랫폼에서 사용하여도 사용이 가능한 인터페이스 스타일이다.

   안드로이드, IOS 플랫폼 등 특정 언어나 플랫폼에 종속되지 않고 사용이 가능하다.

2. Stateless(상태 정보 유지 안함)

   `Rest`는 상태 정보를 유지하지 않는다.

   서버는 각각의 요청을 완전히 다른 것으로 인식하고 처리를 한다.

   이전 요청이 다음 요청 처리에 연관이 되면 안된다.

3. Cacheable(캐시 가능)

   `HTTP`의 기존 웹 표준을 그대로 사용하기 때문에 `HTTP`가 가진 캐싱 기능 적용이 가능하다.

4. Self-descriptiveness(자체 표현 구조)

   `REST API` 메시지만 보고도 쉽게 이해할 수 있는 자체 표현 구조로 되어있다.

5. Client-Server

   `REST` 서버는 `API` 제공을 하고 클라이언트는 사용자 인증에 관련된 일들을 직접 관리한다.

6. Layerd System (계층화)

   클라이언트는 `Rest API` 서버만 호출한다.

   `Rest` 서버는 다중 계층으로 구성될 수 있으면 로드 밸런싱, 암호화 사용자 인증 등을 추가하여 구조상의 유연성을 둘 수 있다.

## REST API란

> `REST` 규칙을 잘 지켜서 설계된 API를 REST API 혹은 RESTful API라 한다.

## REST API 설계 규칙

1. URI는 정보의 자원을 표현해야한다. 자원의 이름은 동사보다 명사를 사용해야 하며 행위에 대한 표현이 들어 가면 안된다.

2. 자원에 대한 행위는 HTTP METHOD로 표현한다.

3. 슬래시(/)는 계층 고나계를 나타내는데 사용한다.

4. URI 마지막은 슬래시(/)를 사용하면 안된다.

5. 하이픈(-)은 URI의 가독성을 높이는데 사용한다.

6. 언더바 혹은 밑줄을 사용하지 않는다.

7. URI 경로에는 소문자가 적합하다.

8. 파일 확장자는 URI에 포함하지 않는다.

9. 리소스 간의 관계를 표현하는 방법

   `GET : /users/{userid}/devices`

## HTTP 응답 코드

1. 2xx 성공

- 200: 클라이언트의 요청을 정상적으로 수행함.
- 201: 클라이언트에게 생성 작업을 요청 받았고, 생성 작업을 성공함.
- 204: 요청은 성공 했지만 응답할 콘텐츠가 없음.

1. 3xx 리다이렉션

- 301: 클라이언트가 요청한 리소스에 대한 URI가 영구적으로 변경되었을 때 사용함.
- 302: 301과 같으나 임시적으로 주소가 바뀌었을 경우 사용함.
- 304: 이전에 방문했을 때의 요청 결과와 다르지 않을 경우 사용함. 캐시된 페이지를 그대로 사용.
- 307: 임시 페이지로 리다이렉트.

1. 4xx 클라이언트 오류

- 400: 클라이언트가 올바르지 못한 요청을 보냄.
- 401: 로그인을 하지 않아 페이지를 열 권한이 없음.
- 403: 금지된 페이지, 로그인을 하든 안하든 접근할 수 없음. (관리자 페이지)
- 404: 찾을 수 없는 페이지, 주소를 잘 못 입력했을 때 사용함.
  403 대신에 사용할 수도 있음.(해커들의 공격을 방지하고자 페이지가 없는 것처럼 위장함)
- 408: 요청 시간이 초과됨.
- 409: 서버가 요청을 처리하는 과정에서 충돌이 발생한 경우. (회원가입 중 중복된 아이디인 경우)
- 410: 영구적으로 사용할 수 없는 페이지.

1. 5xx 서버 오류

- 501: 해당 요청을 처리하는 기능이 만들어지지 않음.
- 502: 서버로 가능 요청이 중간에서 유실된 경우.
- 503: 서버가 터졌거나 유지 보수 중
  (유지 보수 중일때는 유지 보수중이라는 것을 알려주는 페이지로 전송해주는 것이 좋음)
- 504: 서버 게이트웨이에 문제가 생겨 시간 초과가 된 경우.
- 505: HTTP 버전이 달라 요청이 처리할 수 없음.