## CPU 스케줄링 알고리즘

### 비선점형

CPU가 소유권을 포기하는 방식이며 강제로 프로세스를 중지하지 않습니다. 따라서 켄텍스트 스위칭로 인한 부하가 적습니다.

#### FCFS(FIRST COME FIRST SERVED)

먼저 온 걸 먼저 처리한다. 준비 큐에서 오래 기다리는 현상이 발생한다.(convoy effect)

#### SJF(SHORTEST JOB FIRST)

실행시간이 짧은 프로세스를 가장 먼저 실행한다. 긴 시간을 가진 프로세스가 실행되지 않는 현상(starvation)이 일어날 수 있습니다. 실행 시간을 알 수 없기 때문에 과거에 실행했던 것을 기준으로 판단한다.

#### 우선순위

SJF에서 긴 시간을 가진 프로세스가 실행되지 않는 것을 보완하기 위해 오래 기다린 것을 우선순위로 둔다.

> convoy effect vs starvation
>
> 콘보이 이펙트는 순서대로 들어는걸 처리하는 탓에 늦게 실행되는 것이라면 이론적으로 무한대기는 불가능하다.
>
> 스타베이션은 실행시간이 길기때문에 대기 시간동안 짧은 프로세스가 계속 대기큐에 추가되면 이론적으로 무한 대기도 가능하다.

### 선점형

사용하고 있는 프로세스를 알고리즘에 의해 중단시켜 버리고 CPU소유권을 할당하는 방식

#### 라운드 로빈

동일한 할당시간을 주고 그 할당시간이 끝나면 다시 대기 큐로 돌아간다.

할당시간이 너무 크면 FCFS와 다를바 없다.

할당시간이 너무 짧으면 컨텍스트 스위칭이 너무 많아진다.

로드밸런서에도 쓰이는 알고리즘이다.

#### SRF

SJF와 거의 비슷하지만 실행하고 있는것보다 더 짧은 실행시간을 가진 프로세스가 들어오면 컨텍스트 스위칭을 한다.

#### 다단계 큐

우선순위에 따라 준비 큐를 여러가지를 사용한다.

우선순위가 낮은 큐에 있는 프로세스는 실행이 안될 수도 있다.

## 캐시

데이터를 미리 복사해 놓는 임시 저장소 이자 빠른 장치와 느린 자치에서 속도 차이에 따른 병목현상을 줄이기 위한 메모리를 말합니다. 이를 통해 데이터를 접근하는 시간이 오래 걸리는 경우를 해결합니다. 계산된 값을 저장해서 다시 계산하지 않게 하는 장치 또는 메모리로도 의미가 쓰입니다.

### 지역성의 원리

자주 사용하는 데이터를 기반으로 설정하여 `캐시히트`를 높여야한다.

자주 사용하는 데이터에 대한 근거가 되는것이 `공간지역성`과 `시간지역성`이다.

#### 시간 지역성

최근에 사용한 데이터에 다시 접근하려는 특성

#### 공간지역성

최근 접근한 데이터를 이루고 있는 공간이나 가까운 공간

### 캐시히트와 캐시미스

캐시에서 원하는 데이터를 찾았다면 캐시히트 -> 속도가 빨라지고

없어서 주 메모리로 가서 데이터를 찾아오는걸 캐시미스라고 합니다. -> 속도가 느려진다.

### 사례

#### 웹 브라우저의 캐시

쿠키, 로컬 스토리지, 세션 스토리지 등이 있다.

#### 데이터베이스의 캐싱 

메인 DB로 부터 데이터 베이스를 가져오지만 자주 사용하는건 redis에 저장하고 캐싱해온다.

## 메모리할당

### 연속할당

#### 고정분할

메모리를 미리 나누어 관리하는 방식이며 융통성이 없고 내부 단편화가 발생합니다.

#### 가변 분할

매 시점 프로그램의 크기에 맞게 동적으로 메모리를 나눠 사용합니다. 내부 단편화는 발생하지 않고 외부 단편화는 발생 할 수 있습니다.

### 불연속 할당

#### 페이징

동일한 크기의 페이지 단위로 나누어 메모리의 서로 다른 위치에 프로세스를 할당합니다. 홀의 크기가 균일하지 않은 문제는 없어지지만 주소 변환이 복잡해집니다.

#### 세그멘테이션

페이지 단위가 아닌 세그먼트로 나누는 방식입니다. 홀 크기가 균일하지 않은 문제가 발생됩니다.

#### 페이지드 세그멘테이션

## 캐시매핑

### 직접매핑

메모리의 특정 블록은 특정 캐시라인에만 매핑할 수 있습니다.

메모리를 B개의 블록을 만들고 B개의 라인을 가지는 캐시에 1대1 매핑한다.

### 연관매핑

순서를 일치시키지 않고 관련 있는 캐시와 메모리를 매핑하여 메모리의 컨텐츠가 캐시의 어느 위치에도 올라갈 수 있는 방법을 말합니다.

### 집합연관 매핑

집합을 나누고 각 집합에는 직접 매핑을 사용한다. 집합 내의 집합매핑을 사용 할 수 있기 때문에 연관매핑처럼 모든 캐시를 뒤지는 일 없이 바로 캐시히트 캐시미스를 판단할 수 있습니다.

## 페이지 교체 알고리즘

메모리는 스와핑이 많이 일어나는데 이를 줄이기 위한 알고리즘입니다.

#### 오프라인 알고리즘

먼 미래에 참조되는 페이지와 현재 할당하는 패이지를 바꾸는 알고리즘이며 가장 좋은 방법입니다. 

사용할 수 없는 알고리즘이지만 다른 알고리즘의 한계점 역할을 한다.

#### FIFO

가장 먼저 온걸 먼저 교체

#### LRU

가장 오래전에 참조된 페이지를 교체하는 방법. 각 페이지마다 계수기, 스택을 두어야하는 문제점이 있습니다.

#### NUR

0과 1을 가진비트를 둡니다. 1은 최근에 참조, 0은 참조되지 않음을 의미합니다. 시계방향으로 돌면서 0을 찾은 순간 해당 프로세스를 교체하고 해당부분을 1로 바꿉니다.

#### LFU

가장 참조 횟수가 적은 페이지를 교체합니다.



