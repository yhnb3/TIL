# 디자인 패턴

## 싱글톤

어떤 클래스의 인스턴스 개수가 최대 한개를 넘지 않도록 하는 패턴이다. 이 인스턴스는 공유자원에 대한 문지기 또는 중앙에 있는 소통의 중심 역할을 한다. 애플리케이션에서 새 인스턴스를 만들 수 없으며 모든 메서드는 싱글톤을 통해서만 액세스할 수 있다. 애플리케이션에서는 클래스에 있는 정적 메서드를 호출하여 싱글톤을 가져온다.

고정된 메모리 영역을 얻으면서 한반의 new로 인스턴스를 사용하기 대문에 메모리 낭비를 방지할 수 있음 또한 싱글톤으로 만들어진 클래스의 인스턴스는 전역 인스턴스이기 대문에 다른 클래스의 인스턴스들이 데이터를 공유하기 쉽다.

DBCP처럼 공통된 객체를 여러개생성해서 사용해야하는 사오항에 많이 사용

안드로이드 앱 같은 경우 각 액티비티나 클래스별로 주요 클래스들을 일일히 전달하기가 번거롭기 대문에 싱글톤 클래스를 만들어 어디서나 접근하도록 설계하는것이 편하다.

#### 문제점

싱글톤 인스턴스가 너무 많은 일을 하거나 많은 데이터를 공유 시킬 경우 다른 클래스의 인스턴스 간의 결합도가 높아져 `개방-폐쇄 원칙`을 위배하게 된다. 그러면 수정이 어려워지고 테스트하기 어려워진다.

## 빌더

객체가 어떤 식으로 구축되는지에 대해 모르는 상황에서 단계별로 객체를 생성하는 패턴이다. 객체를 직접 생성하는 대신 빌더의 인스턴스를 만들고 빌더에서 객체를 대신 만들도록 하는 방식이다.

객체를 초기화하는데 여러 생성자 매개변수가 필요한 경우, 그중에서도 특히 동일 또는 유사한 유형의 매개변수가 여럿 필요한 경우에 이 빌더 패턴이 유용하다.

## 팩토리 메서드

새 객체를 만들어서 리턴하기 위한 용도로 만들어진 모든 메서드라는 개념을 클래스 계층구조에 적용한 것이다. 베이크 클래스에서는 서브클래서 에서 오버라이드할 팩토리 메서드를 정의하며, 새 객체가 생성되는 방법은 각 서브클래스에서 결정한다. 필요한 유형의 객체는 반드시 팩토리 메서드를 사용하여 만들어야만 한다.

## 추상 팩토리

다른 객체를 만들 수 있는 객체를 팩토리라 부른다. 추상 팩토리 패턴은 팩토리의 구현과 그 팩토리를 사용하는 코드를 갈라주는 패턴이다. 

## 반복자

반복자 패턴을 스면 어떤 자료구조에 있는 모든 원소를 종주할 수 있으며, 이 대 각 원소가 어떤 식으로 저장되고 표현되는지에 대해서는 특별히 신경쓰지 않아도 되고 아예 몰라도 된다. 

## 옵저버

객체의 상태에 관심을 가지고 있는 옵저버에게 자신의 상태가 바뀌었음을 널리 알릴 수 잇다. 이 때 옵저버에 대한 정보는 별로 필요하지 않다. 이런 약한 결합을 출판-구독 패턴이라고 부른다.  (리액트에서 리덕스가 작동하는 것과 비슷한듯?)

## 데코레이터

데코레이터 패턴은 한 객체를 그 객체와 같은 베이스 클래스로부터 파생된, 그리하여 원래 객체와 같은 메서드를 제공하는 다른 객체로 감싸서 객체의 행동을 바꿔주는 패턴이다. 그래서 패턴을 래퍼 패턴이라고 부르기도 한다.

## Q. 상속 대신 데코레이터를 써야하는 이유?

래퍼 객체는 원래 객체와 똑같은 추상베잌스 클래스를 공유하기 대문에 ( 또는 같은 인터페이스를 구현하기 때문에) 원래 객체 대신 사용할 수 있다.

상속은 보통 부모 클래스를 컴파일 시에 변경할 수 있게 해주지만, 데코레이터 패턴은 실행시에 동적으로 적용가능하다. 동적으로 행동을 바꿀 필요가 있는 객체가 있을때 이를 상속으로 해결하기에는 너무 비효율적이다.

데코레이터 패턴을 올바르게 적용하면 객체지향디자인을 단순화할 수 있지만 아무렇게나 썻다가는 반대 효과가 나타날 수 있다. 

