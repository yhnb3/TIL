## TCP / IP란?

인터넷 프로토콜 스위트는 인터넷에서 컴퓨터 들이 서로 정보를 주고 받는데 쓰이는 프로토콜 집합이며, 이를 TCP/IP 4계층 혹은 OSI 7계층으로 설명합니다.

각 계층들은 다른 계층이 바뀌어도 영향을 받지 않게끔 설계되어 있습니다.

### 애플리케이션 계층

FTP, HTTP, SSH, SMTP, DNS 등 응용프로그램이 사용되는 계층이며. 웹 서비스, 이메일 등 서비스를 실질적으로 제공하는 계층입니다.

### 전송계층

송신자와 수신자를 연결하는 통신 서비스를 제공하며 애플리케이션 계층과 인터넷 계층 사이의 데이터 전달 중계 역할을 합니다.

#### TCP

패킷 사이의 순서를 보장하고 연결지향 프로토콜을 사용해서 연결을 하여 신뢰성을 구축하여 확인하며 `가상회선 패킷 교환 방식`을 사용합니다.

#### UDP

순서를 보장하지 않고 수신 여부를 확인하지 않으며 단순히 데이터만 주고 받는 `데이터그램 패킷 교환 방식`을 사용합니다.

#### TCP 연결 성립 과정

1. 클라이언트가 ISN을 담아 SYN을 서버로 보낸다.
2. 서버가 클라이언트의 ISN + 1을 담은 ACK와 서버의 ISN을 담은 SYN을 클라이언트로 보낸다.
3. 클라이언트가 서버의 ISN +1을 담은 ACK를 서버로 보낸다.

> SYN : 연결 요청 플래그
>
> ACK : 응담 플래그

TCP는 이런 연결과정이 있기에 신뢰성이 있다고 표현하며 UDP는 이런 연결과정이 없다.

#### TCP 연결 해제 과정

1. 클라이언트가 서버로 FIN 을 보낸다.
2. 서버가 클라이언트로 ACK를 보낸다.
3. 서버가 ACK를 보낸후 일정 시간 이후에 FIN을 클라이언트로 보낸다.
4. 클라이언트가 서버로 ACK를 보낸다. 그리고 조금 있다가 연결을 끊는다.

클라이언트가 바로 연결을 끊지 않는 이유는 데이터의 무결성을 지키기 위함이다. 그리고 서버가 제대로 닫혔는지 확인하기 위함이다.

### 인터넷 계층

장치로 받은 네트워크 패킷을 IP 주소로 지정된 목적지로 전달하기 위한 계층입니다. IP, ARP, ICMP 가 있으며 비연결형적인 특징을 가집니다.

### 링크 계층

전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하며 장치 간에 신호를 주고 받는 '규칙'을 정하는 계층입니다. 

#### 유선

전 이중화 통신 : 양쪽 장치가 동시에 송수신할 수 있다.

#### 무선

반이중화통신 : 양쪽 장치는 서로 통신할 수 있지만 동시에 통신할 수 없으며 한번에 한 방향만 통신할 수 있는 방식을 말합니다.

### 계층 간 데이터 송수신 과정

HTTP를 통해 웹 서버에 있는 데이터를 요청했다면? 어떤 과정을 거치게 될까요?

애플리케이션 계층에서 전송계층으로 필자가 보내는 요청값들이 캡슐화 과정으로 거쳐 전달되고 다시 링크 계층을 통해 해당 서버와 통신을 하고, 해당 서버의 링크 계층으로부터 애플리케이션까지 비캡슐화 과정을 거쳐 데이터가 전송됩니다.

#### 캡슐화 과정

상위 계층의 헤더와 데이터를 하위 계층의 데이터 부분에 포함시키고 해당 계층의 헤더를 삽입하는 과정을 말합니다.

#### 비캡슐화 과정

하위 계층에서 상위 계층으로 가며 각 계층의 헤더 부문을 제거하는 과정을 말합니다.

#### 라우터

여러 개의 네트워크를 연결, 분할, 구분시켜주는 역할을 하며 다르 네트워크에 존재하는 장치끼리 서로 데이터를 주고받을때 패킷 소모를 최소화하고 경로를 최적화 하여 최소 경로로 패킷을 포워딩하는 장비입니다.

#### IP 주소 체계

IPv4 : 32비트를 8비트 단위로 점 찍어서 표기

IPv6 : 64비트를 16비트 단위로 `::`찍어서 표기

### HTTP

웹 서버 통신에 사용되는 프로토콜 (Hyper Text Transfer Protocol)

#### HTTPS:

전송계층과 애플리케이션 계층 사이에 SSL/TLS 계층을 넣어 신뢰할 수 있는 HTTP 요청을 말합니다.

### 주소창에 WWW.NAVER.COM을 치면 어떻게 될까요?

대기열, 캐싱, DNS, 라우팅, ARP 초기연결을 거쳐 컨텐츠를 다운 받게 되고 브라우저 렌더링을 통해 네이버라는 화면이 나타나게 됩니다. 또한 이러한 과정은 비캡슐화 캡슐화 과정을 거쳐서 이뤄집니다.

#### 캐싱

이전에 불러왔던 데이터라면 캐싱을 통해 통신없이 해결

#### DNS

도메인을 통해 IP주소를 매핑한다.

#### 라우팅

IP주소를 찾아가는 과정이다. 홉바이홉 통신을 통해 이루어지며 라우팅 테이블을 통해 진행된다.

### ARP

IP주소를 가지고 MAC주소를 찾는 과정

#### 초기연결

TCP 3WAY HANDSHAKE를 통해 초기연결

 