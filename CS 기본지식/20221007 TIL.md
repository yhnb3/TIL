## REST API

API? application programming interface

소프트웨어와 소프트웨어 사이 데이터 전송을 가능하게 하는 프로그램

REES API? 

이러한 api들 중에서도 restful 한것을 말한다.

1. uniform-interface

   자원들이 각각의 독립적인 인터페이스를 가져야합니다.

   - 웹페이지를 변경했다고 웹 브라우저를 업데이트하는 일은 없어야 합니다.
   - HTTP 명세나 HTML 명세가 변경되어도 웹페이즈는 잘 작동해야 합니다.

2. self-descriptive messages

   HTTP 헤더에 타입을 명시하고 각 메시지들은 MIME 타입에 맞춰 표혀노디어야 합니다.

   예를들어 json을 반환한다면 `application/json`을 명시해 주어야 합니다.

3. HATEOS 구조

   하이퍼링크에 따라 다른 페이지를 보여줘야 하며 데이터마다 어떤 URL에서 원햇는지 명시해 주어야합니다.

4. stateless

   REST API를 제공하는 서버는 세션을 해당 서버쪽에 유지하지 않는다는 의미입니다.

5. Cacheable

   304를 보내며 캐싱된다. 

   네트워크 요청을 줄여주며 이는 UX 향상에도 도움이 됩니다.

6. Client-server

   클라이언트와 서버가 서로 독립적인 구조를 가져야합니다.

   서버에서HTTP 표준만 지킨다면 웹에서는 그에 따른 화면이 잘 나타나게 됩니다. 서버는 그저 API를 제공하고 그 API에 맞는 비지니스 로직을 처리하면 됩니다.

7. Layered System

   계층 구조로 아키텍쳐를 만들 수 있다는 것을 뜻합니다. 

### URI 규칙

1. 동작은 HTTP 메서드로 표현 해야합니다.
2. 확장자는 표기하지 말아야 합니다.
3. 동사가 아닌 명사로만 보기해야합니다.
4. URI는 계층적인 내용을 담고 있어야 합니다. 큰것/중간것/작은것
5. 소문자로쓰며 너무 길경우 `-`을 씁니다.
6. HTTP 응답 상태 코드를 활용합니다.

 ## 네트워크를 이루는 장치의 이해

네트워크의 각 계층의 장치들은 아랫 단계의 장치를 커버할 수 있다.

### 애플리케이션 계층 장치

#### L7 스위치

스위치는 여러 장비를 연결하고 데이터 통신을 중재하며 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는 통신 네트워크 장비입니다.

L7 스위치는 로드밸런서라고도 하며, 서버의 부하를 분산하는 기기입니다. 클라이언트로부터 오는 요청들을 뒤쪽의 여러 서버로 나누는 역할을 하며 시스템이 처리할 수 있는 트래픽 증가를 목표로 합니다.

URL, 서버 , 캐시, 쿠키 들을 기반으로 트래픽을 분산합니다. 또한 바이러스 불필요한 외부 데이터 등을 걸러내는 필터링 기능 또한 가지고 있으며 응용프로그램 수준의 트래픽 모니터링도 가능합니다.

장애가 발생한 서버가 있다면 트래픽 분산 대상에서 제외해야 하는데 이는 정기적으로 헬스 체크를 이용하여 감시하면서 이루어집니다.

> 헬스 체크
>
> 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청을 보내어 서버에 문제가 있는지 없는지 확인

#### 로드 밸런서를 이용한 서버 이중화

서비스를 안정적으로 운용하기 위해서는 2대 이상의 서버는 필수적입니다. 로드밴런서는 2대 이상의 서버를 기반으로 가상 IP를 제공하고 이를 기반으로 안정적인 서비스를 제공합니다.

### 전송 계층 장치

#### L4 스위치

1. 부하분산

2. 상위 계층의 패킷을 분석해 트래픅의 우선 순위를 부여할 수 있음.

   HTTP가 온다면 패킷 중 포트번호 80에 우선순위를 둘 수 있음.

3. 헤더로 분석해서 부하 분산을 할 수 있음.

### 인터넷 계층 장치

#### 라우터

- 라우팅을 하는 장비 / 라우팅은 하나 이상의 네트워크에서 경로를 선택하는 프로세스
- 서로 데이터를 주고 받을 때 `패킷소모 최소화,` `경로 최적화` 하는 장비

### L3 스위치

- L2 스위치의 기능 + 라우팅

라우터는 소프트웨어 기반의 라우팅과 하드웨어 기반의 라우팅을 하는 것으로 나눠지는데 하드웨어 기반의 라우팅을 담당하는 장치를 L3 스위치라고 합니다.





