# 스레드

스레드는 애플리케이션의 실행에 있어서 가장 기본적이 단위이다. 각 스레드마다 별도의 스택이 있으며, 각 스레드는 같은 애플리케이션이 있는 다른 스레드와 독립적으로 돌아간다. 그래서 공유하는 자원을 잘 관리해야한다.

## 모니터와 세마포어

스레드와 공유자원 사이의 상호작용을 제어할 대는 스레드 동기화 라는 메커니즘을 이용해야한다.

스레드동기화는 모니터와 세마포어 로 구성된다. 어느쪽을 쓰는지는 시스템이나 언어에서 어느 것을 지원하는 지에 따라 달라진다.

상호보호 자물쇠로 보호되는 루틴의 집합을 모니터라 하며 자물쇠를 획득하는 스레드만이 모니터에 접근이 가능하다. 즉, 한 모니터에 한 스레드만이 접근이 가능하다고 할 수 있다. 스레드가 그 자물쇠를 놓아주면 다른 스레드가 자물쇠를 획득하는 방식이다.

### 데드락

스레드 a와 스레드 b가 메모리 a와 b를 사용하려할때 스레드a는 메모리a의 자물쇠를 가졌고 스레드 b는 메모리 b의 자물쇠를 가졋을때 서로 메모리를 모두 가지지 못해 이 상태가 풀리지 않는 상태를 말한다.

메모리를 참조하는 순서를 모든 스레드가 같게 함으로써 해결할 수 있지만 항상 잘 되는것은아니다.