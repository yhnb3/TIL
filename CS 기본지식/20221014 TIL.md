## 데이터 베이스

일정한 규칙, 혹은 규약을 통해 구조화 되어 정장되는 데이터의 모음.

### 엔터티

사람, 장소, 물건, 사건, 개념 등 여러개의 속성을 지닌 명사를 의미합니다.

ex) 회원이라는 엩터티는 이름 아이디 주소 전화번호의 속성을 갖는다.

> 약한 엔터티
>
> A가 혼자서는 존재하지 못하고 B의 존재 여부에 따라 종속적이라면 A는 약한 엔터티이고 B는 강한 엔터티가 됩니다. 
>
> 예를 들어 방은 건물 안에만 존재하기 때문에 약한 엔터티이고 건물은 강한 엔터티 입니다.

### 릴레이션

데이터베이스에서 정보를 구분하여 저장하는 기본 단위입니다. 엔터티에 관한 데이터를 데이터베이스는 릴레이션 하나에 담아 관리합니다. `엔터티 >> 릴레이션`

릴레이션은 관계형데이터베이스(RDBMS)에서는 테이블이라하고 noSql에서는 컬렉션이라고 합니다.

> MySQL(대표적인 관계형 데이터 베이스)
>
> 레코드 테이블 데이터 베이스로 이루어져있고
>
> MongoDB(대표적인 NoSQL)
>
> 도큐먼트 컬렉션 데이터 베이스로 이루어져있고

### 속성(attribute)

릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보입니다. 예를 들어 '차'라는 엔터티의 속성을 뽑아봅시다. 차넘버, 바퀴 수 , 차 색깔, 차종 등이 있습니다. 이 중에서 서비스 요구사항을 기반으로 관리해야할 필요가 있는 속성들만 엔터티의 속성이 됩니다.

### 도메인

릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합.

### 필드와 레코드 그리고, 타입

회원이란 엔터티는 member라는 테이블로 속성인 이름, 아이디 등을 가지고 있으며 name, ID, adress 등의 필드를 가집니다. 그리고 이 테이블에 쌓이는 행 단위의 데이터를 레코드 혹은 튜플이라고 합니다. 

### 필드타입

숫자타입: INT

날짜 타입: DATE, DATETIME, TIMESTAMP

문자타입 :CHAR, VARCHAR 

TEXT : 큰 문자열 저장에 쓰며 주로 게시판의 본문을 저정 할 때 씁니다.

ENUM, SET 모두 문자열을 열거한 타입입니다.(추천하지 않는다.)

### 관계

1:1관계

유저당 유저 이메일은 한개씩 있겠죠? 이경우 1:1관계가 됩니다/

1:N관계

유저가 상품을 N개 살 수 있으므로 유저와 상품의 관계

N:M

학생과 강의는 N:M입니다. 학생도 여러개의 강의를 들을 수 있고 강의도 여러명의 학생이 들을 수 있다. 

이는 1:N 테이블과 1:M테이블을 연결하여 설정합니다.

### 키

데이블간의 관계를 조금 더 명확하게 하고 테이블 자체의 인덱스를 위해 설정된 장치로 기본키 외래키 후보키 슈퍼키 대체키가 있습니다.

유일성 : 중복되는 값 없다.

최소성 : 필드를 조합하지 않고 최소 필드만 써서 키를 형성할 수 있는 것을 말합니다.

#### 기본키

PK(PRIMARY KEY) 유일성과 최소성 만족

중복되어서는 안된다.

보통 인조키로 만든다. EX) ID 부여

### 외래키

다른 테이블의 기본키를 그대로 참조하는 값으로 다른 테이블과의 관계를 식별하는데 사용합니다.

중복되어도 상관없습니다.

#### 후보키

기본키가 될 수 있는 후보들 유일성과 최소성을 만족한다.

### ERD

데이터베이스를 구축할때 가장 기초적인 뼈대 역할을 하며 릴레이션 간의 관계를 정의한 것입니다.

### 트랜잭션, 커밋, 롤백, 그리고 트랜잭션 전파

#### 트랜잭션

데이터베이스에서 하나의 논리적 기능을 수행하기 위한 작업의 단위

여러 쿼리들을 하나로 묶는 단위

#### 커밋

커밋은 여러 쿼리가 성공적으로 처리되었다고 확정하는 명령어. 트랜잭션 단위로 수행되며 변경된 내용이 모두 영구적으로 저장되는 것을 말합니다. 

#### 롤백

어떠한 에러나 여러 이슈 때문에 트랜잭션이 일어나기 전으로 돌리는 일을 말합니다. 트랜잭션으로 묶는 로직에 외부 API호출은 자제해야합니다.

#### 트랜잭션 전파

트랜잭션을 수행할때 커넥션 단위로 수행하기 때문에 커넥션 객체를 넘겨서 수행해야합니다. 하지만 이를 매번 넘겨주지가 어렵기도 하고 귀찮기도하다. 이를 넘겨서 수행하지 않고 여러 트랜잭션 관련 메서드의 호출을 하나의 트랜잭션에 묶이도록하는 것을 트랜잭션 전파라고 합니다.

#### ACID

- 원자성 : 트랜잭션과 관련된 일이 모두 수행되거나 안되거나를 보장한다.
- 일관성 : 허용된 방식으로만 데이터를 변경해야하는 것을 의미합니다.
- 격리성 : 트랜잭션 수행시 서로 끼어들지 못하는 것을 말합니다.
- 지속성 : 성공적으로 수행된 트랜잭션은 영원히 반영되어야 하는 것을 의미합니다.
- 무결성 : 데이터의 정확성, 일관성, 유효성을 유지하는 것을 말합니다. 데이터의 값과 현실게계의 실제 값이 일치하는지에 대한 신뢰가 생깁니다,

#### 격리성

절대 트랜잭션끼리는 간섭하지 못할까요? 아닙니다.

격리성을 너무 높히면 동시성이 낮아지고 성능이 떨어진다.

그래서 격리 단계를 나누어서 적당한 수준을 찾는다.

